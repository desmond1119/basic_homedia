# âš¡ å¿«é€Ÿæ¸…ç† GitHub æ•æ„Ÿä¿¡æ¯

## ğŸ¯ 5 åˆ†é’Ÿå®Œæˆæ¸…ç†

---

## âœ… æ­¥éª¤ 1: è½®æ¢ Supabase Keyï¼ˆæœ€é‡è¦ï¼ï¼‰

**å¿…é¡»å…ˆåšè¿™ä¸ªï¼Œè®©æ—§ Key å¤±æ•ˆï¼**

1. æ‰“å¼€ [Supabase Dashboard](https://app.supabase.com/project/jufwllhkgtvovyazgxld/settings/api)
2. æ‰¾åˆ° **Project API keys** éƒ¨åˆ†
3. ç‚¹å‡» **Generate new anon key** æˆ– **Reset API keys**
4. å¤åˆ¶æ–°çš„ `anon key`

5. æ›´æ–°æœ¬åœ° `.env` æ–‡ä»¶ï¼š
   ```bash
   # å¦‚æœæ²¡æœ‰ .envï¼Œå…ˆåˆ›å»º
   cp .env.example .env
   
   # ç¼–è¾‘ .envï¼Œå¡«å…¥æ–° key
   VITE_SUPABASE_URL=https://jufwllhkgtvovyazgxld.supabase.co
   VITE_SUPABASE_ANON_KEY=<ä½ çš„æ–°key>
   ```

6. æµ‹è¯•åº”ç”¨ï¼š
   ```bash
   npm run dev
   # æ‰“å¼€æµè§ˆå™¨æµ‹è¯•ç™»å½•åŠŸèƒ½
   ```

âœ… **å®Œæˆï¼æ—§ Key å·²å¤±æ•ˆï¼Œå³ä½¿æ³„éœ²ä¹Ÿæ²¡ç”¨äº†**

---

## âœ… æ­¥éª¤ 2: æ¸…ç† Git å†å²

### æ–¹æ³• Aï¼šä¸€é”®è‡ªåŠ¨æ¸…ç†ï¼ˆæ¨èï¼‰â­

```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd /Users/gooday/Documents/æœ€å¥½/basie_media

# 2. ç»™è„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™
chmod +x scripts/rebuild-safe-repo.sh

# 3. è¿è¡Œæ¸…ç†è„šæœ¬
./scripts/rebuild-safe-repo.sh

# 4. æŒ‰æç¤ºè¾“å…¥ YES ç¡®è®¤

# 5. å®Œæˆåï¼ŒæŒ‰æç¤ºæ¨é€åˆ° GitHub
```

### æ–¹æ³• Bï¼šæ‰‹åŠ¨æ¸…ç†

```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd /Users/gooday/Documents/æœ€å¥½/basie_media

# 2. å¤‡ä»½ï¼ˆé‡è¦ï¼ï¼‰
cp -r . ../basie_media_backup

# 3. åˆ é™¤ Git å†å²
rm -rf .git

# 4. é‡æ–°åˆå§‹åŒ–
git init

# 5. æ·»åŠ æ‰€æœ‰æ–‡ä»¶
git add .

# 6. åˆ›å»ºåˆå§‹æäº¤
git commit -m "Initial commit - Security cleanup completed"

# 7. è¿æ¥ GitHubï¼ˆæ›¿æ¢æˆä½ çš„ä»“åº“åœ°å€ï¼‰
git remote add origin https://github.com/ä½ çš„ç”¨æˆ·å/ä½ çš„ä»“åº“å.git

# 8. æ¨é€åˆ° GitHubï¼ˆå¼ºåˆ¶è¦†ç›–ï¼‰
git push -u origin main --force

# å¦‚æœåˆ†æ”¯æ˜¯ masterï¼Œç”¨è¿™ä¸ªï¼š
# git push -u origin master --force
```

---

## âœ… æ­¥éª¤ 3: éªŒè¯æ¸…ç†ç»“æœ

### åœ¨ GitHub ä¸Šæ£€æŸ¥ï¼š

1. è®¿é—®ä½ çš„ GitHub ä»“åº“
2. ç‚¹å‡» **Commits** æŸ¥çœ‹å†å²
3. åº”è¯¥åªæœ‰ 1 ä¸ªæ–°çš„æäº¤
4. ç‚¹å¼€ `.env.example`ï¼Œç¡®è®¤åªæœ‰å ä½ç¬¦ï¼š
   ```
   VITE_SUPABASE_URL=your-project-url
   VITE_SUPABASE_ANON_KEY=your-anon-key
   ```

### ä½¿ç”¨ GitHub æœç´¢éªŒè¯ï¼š

1. åœ¨ä»“åº“é¡µé¢æŒ‰ `/` é”®æ‰“å¼€æœç´¢
2. æœç´¢éƒ¨åˆ†æ—§ key å†…å®¹ï¼ˆä¾‹å¦‚ `eyJhbGciOiJIUzI1NiIs`ï¼‰
3. åº”è¯¥æ˜¾ç¤º **No results**

âœ… **å®Œæˆï¼GitHub ç°åœ¨æ˜¯å¹²å‡€çš„**

---

## âœ… æ­¥éª¤ 4: é…ç½®å®‰å…¨é˜²æŠ¤ï¼ˆæ¨èï¼‰

### æ·»åŠ  Pre-commit Hook

```bash
# 1. å®‰è£… husky
npm install -D husky

# 2. åˆå§‹åŒ–
npx husky install
npm pkg set scripts.prepare="husky install"

# 3. æ·»åŠ  pre-commit hook
npx husky add .husky/pre-commit "chmod +x scripts/security-check.sh && ./scripts/security-check.sh"

# 4. æµ‹è¯• hook
git add .
git commit -m "test: Add pre-commit security check"
```

### å¯ç”¨ GitHub Secret Scanning

1. è®¿é—®ä»“åº“ **Settings**
2. è¿›å…¥ **Security & analysis**
3. å¯ç”¨ä»¥ä¸‹åŠŸèƒ½ï¼š
   - âœ… **Dependency graph**
   - âœ… **Dependabot alerts**
   - âœ… **Secret scanning**
   - âœ… **Push protection**

---

## ğŸ“‹ å®Œæˆæ£€æŸ¥æ¸…å•

ç¡®è®¤ä»¥ä¸‹æ‰€æœ‰é¡¹ç›®ï¼š

- [ ] âœ… Supabase Key å·²åœ¨ Dashboard è½®æ¢
- [ ] âœ… æœ¬åœ° `.env` ä½¿ç”¨æ–° Keyï¼Œåº”ç”¨æ­£å¸¸è¿è¡Œ
- [ ] âœ… `.env.example` åªåŒ…å«å ä½ç¬¦
- [ ] âœ… Git å†å²å·²é‡å»ºï¼ˆåªæœ‰ 1 ä¸ªåˆå§‹æäº¤ï¼‰
- [ ] âœ… å·²å¼ºåˆ¶æ¨é€åˆ° GitHub
- [ ] âœ… GitHub ä¸Šæœç´¢ä¸åˆ°æ—§ Key
- [ ] âœ… å¤‡ä»½å·²ä¿å­˜
- [ ] âœ… Pre-commit hook å·²é…ç½®ï¼ˆå¯é€‰ï¼‰
- [ ] âœ… GitHub Secret Scanning å·²å¯ç”¨ï¼ˆå¯é€‰ï¼‰

---

## ğŸ‰ å®Œæˆï¼

ä½ çš„é¡¹ç›®ç°åœ¨æ˜¯å®‰å…¨çš„ï¼š

âœ… æ—§ Key å·²å¤±æ•ˆ  
âœ… GitHub å†å²å¹²å‡€  
âœ… ä»£ç æ­£å¸¸è¿è¡Œ  
âœ… é˜²æŠ¤æªæ–½å°±ä½  

---

## ğŸ†˜ é‡åˆ°é—®é¢˜ï¼Ÿ

### Q: æ¨é€æ—¶æç¤º "rejected"ï¼Ÿ

```bash
# ä½¿ç”¨ --force å¼ºåˆ¶æ¨é€
git push -u origin main --force
```

### Q: ä¸çŸ¥é“åˆ†æ”¯åæ˜¯ main è¿˜æ˜¯ masterï¼Ÿ

```bash
# æŸ¥çœ‹å½“å‰åˆ†æ”¯
git branch

# å¦‚æœæ˜¯ masterï¼Œæ¨é€æ—¶ç”¨ï¼š
git push -u origin master --force
```

### Q: æç¤ºæ²¡æœ‰æƒé™ï¼Ÿ

```bash
# æ–¹æ³• 1: ä½¿ç”¨ Personal Access Token
# GitHub Settings > Developer settings > Personal access tokens
# ç”Ÿæˆæ–° tokenï¼Œç”¨å®ƒä½œä¸ºå¯†ç 

# æ–¹æ³• 2: ä½¿ç”¨ SSH
# ä¿®æ”¹è¿œç¨‹åœ°å€ä¸º SSH æ ¼å¼
git remote set-url origin git@github.com:ä½ çš„ç”¨æˆ·å/ä½ çš„ä»“åº“å.git
```

### Q: åº”ç”¨æ— æ³•è¿æ¥ Supabaseï¼Ÿ

```bash
# 1. æ£€æŸ¥ .env æ–‡ä»¶æ˜¯å¦å­˜åœ¨
cat .env

# 2. æ£€æŸ¥ Key æ˜¯å¦æ­£ç¡®
# åº”è¯¥çœ‹åˆ°ä»¥ eyJ å¼€å¤´çš„é•¿å­—ç¬¦ä¸²

# 3. é‡å¯å¼€å‘æœåŠ¡å™¨
npm run dev
```

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°ä»»ä½•é—®é¢˜ï¼Œå‘Šè¯‰æˆ‘ï¼š
1. ä½ åœ¨å“ªä¸ªæ­¥éª¤é‡åˆ°é—®é¢˜
2. å…·ä½“çš„é”™è¯¯ä¿¡æ¯æ˜¯ä»€ä¹ˆ
3. è¿è¡Œäº†ä»€ä¹ˆå‘½ä»¤

æˆ‘ä¼šå¸®ä½ è§£å†³ï¼
